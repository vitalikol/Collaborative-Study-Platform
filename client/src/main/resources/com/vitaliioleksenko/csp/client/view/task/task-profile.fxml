<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ListView?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.control.TextArea?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<?import javafx.scene.layout.Region?>
<AnchorPane style="-fx-background-color: #FAFAFA;"
            xmlns="http://javafx.com/javafx/21"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.vitaliioleksenko.csp.client.controller.task.TaskProfileController">

    <children>
        <VBox spacing="15"
              AnchorPane.topAnchor="20"
              AnchorPane.leftAnchor="20"
              AnchorPane.rightAnchor="20"
              AnchorPane.bottomAnchor="20">

            <!-- HEADER -->
            <VBox spacing="6">
                <children>
                    <Label fx:id="taskTitleLabel" text="Loading task..." >
                        <font><Font name="System Bold" size="28"/></font>
                    </Label>

                    <HBox spacing="10">
                        <children>
                            <Label fx:id="groupNameLabel" text="Group: -" textFill="#555">
                                <font><Font name="System Italic" size="14"/></font>
                            </Label>

                            <Label fx:id="deadlineLabel" text="Deadline:" textFill="#D32F2F">
                                <font><Font name="System Bold" size="14"/></font>
                            </Label>
                        </children>
                    </HBox>
                </children>
            </VBox>

            <Separator/>

            <!-- ACTION PANELS -->
            <HBox>

                <!-- ADMIN PANEL -->
                <HBox fx:id="adminActionsBox"
                      spacing="10">
                    <children>
                        <Button onAction="#onEditTask" text="Edit Task"/>
                        <Button onAction="#onAddMaterial" text="Add Material"/>
                        <Button onAction="#onDeleteTask" text="Delete Task" style="-fx-background-color: #D32F2F; -fx-text-fill: white;"/>
                    </children>
                </HBox>
                <Region HBox.hgrow="ALWAYS"/>
                <HBox spacing="10">
                    <children>
                        <Button fx:id="doneBtn" text="Mark as Done" onAction="#onMarkAsDone"/>
                        <Button fx:id="reworkBtn" text="Request Rework" onAction="#onRequestRework"/>
                        <Button fx:id="reviewBtn" text="Submit for Review" onAction="#onSubmitForReview"/>
                    </children>
                </HBox>
            </HBox>

            <!-- MAIN CONTENT -->
            <HBox spacing="20" VBox.vgrow="ALWAYS">

                <!-- DESCRIPTION -->
                <VBox spacing="5" HBox.hgrow="ALWAYS">
                    <children>
                        <Label text="Task Description:">
                            <font><Font name="System Bold" size="16"/></font>
                        </Label>

                        <TextArea fx:id="descriptionArea"
                                  editable="false"
                                  wrapText="true"
                                  prefHeight="400"/>
                    </children>
                </VBox>

                <!-- RESOURCES -->
                <VBox spacing="10" prefWidth="300">

                    <children>
                        <VBox spacing="5">
                            <children>
                                <Label text="Task Materials:">
                                    <font><Font name="System Bold" size="16"/></font>
                                </Label>
                                <ListView fx:id="materialsListView" prefHeight="180"/>
                            </children>
                        </VBox>

                        <VBox spacing="5">
                            <children>
                                <Label text="Submitted Works:">
                                    <font><Font name="System Bold" size="16"/></font>
                                </Label>
                                <ListView fx:id="submissionsListView" prefHeight="180"/>
                            </children>
                        </VBox>
                    </children>
                </VBox>
            </HBox>
        </VBox>
    </children>
</AnchorPane>
